# Документация

- [Настройка окружения для разработки](#настройка-окружения-для-разработки)
- [Разработка](#разработка)
- [Использование](#использование)

## Настройка окружения для разработки

- [Для пользователей Windows](#настройка-окружения-для-пользователей-windows)
- [Для пользователей Linux](#настройка-окружения-для-пользователей-linux)

### Настройка окружения для пользователей Windows

1. Установить среду выполнения [Node.JS](https://nodejs.org/en)

   - Перейти по ссылке на официальный сайт [Node.JS](https://nodejs.org/en), скачать и установить последнюю актуальную **LTS** версию
   - После установки открыть терминал в любом месте и убедиться, что установка прошла успешно

     ```bash
       $ node -v
     ```

     ```bash
       $ npm -v
     ```

2. Установить компилятор [TypeScript](https://www.typescriptlang.org/download) любым из предложенных способов

   - Открыть терминал в любом месте и установить TypeScript **глобально**

     ```bash
       $ npm i -g typescript
     ```

   - Открыть терминал в корневой папке проекта и установить TypeScript **локально**

     ```bash
       $ npm i -D typescript
     ```

3. Установить базу данных [PostgreSQL](https://www.postgresql.org/download/windows/)

   - Перейти по ссылке на официальный сайт [PostgreSQL](https://www.postgresql.org/download/windows/), скачать и установить последнюю актуальную версию
   - В процессе установки **НЕ НУЖНО** трогать настройки стандартного порта сервера. Он **ДОЛЖЕН ОСТАТЬСЯ СТАНДАРТНЫМ (`5432`)**
   - На этапе создания пароля для стандартного пользователя `postgres` рекомендуется его сохранить, чтобы избежать переустановки PostgreSQL
   - Для создания новой базы данных необходимо

     - Открыть терминал из корневой папки Postgres (`C:\Program Files\PostgreSQL\{version}\bin`)

     - Войти в систему PostgreSQL под пользователем `postgres`

       ```bash
        $ psql -U postgres
       ```

     - Ввести команду создания базы данных

       ```bash
         $ CREATE DATABASE <название бызы данных строчными буквами>;
       ```

     - Выйти из системы PostgreSQL

       ```bash
         $ \q
       ```

4. Создать собственного бота в Telegram

   - Перейти в личные сообщения с [BotFather](https://t.me/BotFather)

   - Создать нового бота

     ```bash
       /newbot
     ```

   - После указания названия и имени бота получить `TOKEN`

5. Создать собственного бота в Discord

   - Перейти в [раздел разработчиков](https://discord.com/developers/applications)

   - Создать новое приложение, нажав на синюю кнопку `New Application`

     - В созданном приложении во вкладке `Bot` создать нового бота, нажав на синюю кнопку `Add bot`

   - После указания имени бота получить `TOKEN`

6. Настроить переменные окружения

   - В корневой папке проекта создать пустой файл `.env`
   - В только что созданном файле объявить переменные:

     ```env

     ```

7. Настроить конфигурацию менеджера библиотек

   - В корневой папке проекта создать пустой файл `.npmrc`
   - В только что созданном файле объявить переменные:

     ```npmrc
       registry=https://registry.npmjs.org/
       @var3n1k:registry=https://npm.pkg.github.com/
       //npm.pkg.github.com/:_authToken=<ТОКЕН ДЛЯ СКАЧИВАНИЯ БИБЛИОТЕК> # Токен для скачивания библиотек @var3n1k/
     ```

8. Собрать текущую версию приложения
   - Запустить файл `#Dependencies Install` из корневой папки проекта для установки зависимостей (**`#Dependencies Update` НЕ ЗАПУСКАТЬ**)
   - Запустить файл `#Build` из корневой папки проекта для сборки приложения (`запускать после каждого сохраненного изменения в папке ./src`)
   - Запустить файл `#RunProd` из корневой папки проекта для запуска собранной Production-версии приложения

### Настройка окружения для пользователей Linux

1. Установить среду выполнения [Node.JS](https://nodejs.org/en)

   - Открыть терминал в любом месте и скачать скрипт установки Node.JS

     ```bash
       $ curl -sL https://deb.nodesource.com/setup_14.x -o nodesource_setup.sh
       $ sudo bash nodesource_setup.sh
       $ sudo apt install nodejs
     ```

   - После установки открыть терминал в любом месте и убедиться, что установка прошла успешно

     ```bash
       $ node -v
     ```

     ```bash
       $ npm -v
     ```

2. Установить компилятор [TypeScript](https://www.typescriptlang.org/download) любым из предложенных способов

   - Открыть терминал в любом месте и установить TypeScript **глобально**

     ```bash
       $ npm i -g typescript
     ```

   - Открыть терминал в корневой папке проекта и установить TypeScript **локально**

     ```bash
       $ npm i -D typescript
     ```

3. Установить базу данных [PostgreSQL](https://www.postgresql.org/download/windows/)

   - Установить модуль PostgreSQL

     ```bash
       $ sudo apt install postgresql
     ```

   - После установки открыть терминал в любом месте и зайти в ОС под пользователем `postgres`

     ```bash
       $ sudo -i -u postgres
     ```

   - Войти в систему

     ```bash
       $ psql
     ```

   - Создать пароль для стандартного пользователя `postgres`

     ```bash
       $ ALTER USER postgres WITH PASSWORD '<НОВЫЙ ПАРОЛЬ>';
     ```

   - Для создания новой базы данных необходимо

     - Открыть терминал в любом месте

     - Войти в систему PostgreSQL

       ```bash
        $ psql
       ```

     - Вписать скрипт создания базы данных

       ```bash
         $ CREATE DATABASE <название бызы данных строчными буквами>;
       ```

     - Выйти из системы PostgreSQL

       ```bash
         $ \q
       ```

4. Создать собственного бота в Telegram

   - Перейти в личные сообщения с [BotFather](https://t.me/BotFather)

   - Создать нового бота

     ```bash
       /newbot
     ```

   - После указания названия и имени бота получить `TOKEN`

5. Создать собственного бота в Discord

   - Перейти в [раздел разработчиков](https://discord.com/developers/applications)

   - Создать новое приложение, нажав на синюю кнопку `New Application`

     - В созданном приложении во вкладке `Bot` создать нового бота, нажав на синюю кнопку `Add bot`

   - После указания имени бота получить `TOKEN`

6. Настроить переменные окружения

   - В корневой папке проекта создать пустой файл `.env`
   - В только что созданном файле объявить переменные:

     ```env

     ```

7. Настроить конфигурацию менеджера библиотек

   - В корневой папке проекта создать пустой файл `.npmrc`
   - В только что созданном файле объявить переменные:

     ```npmrc
       registry=https://registry.npmjs.org/
       @var3n1k:registry=https://npm.pkg.github.com/
       //npm.pkg.github.com/:_authToken=<ТОКЕН ДЛЯ СКАЧИВАНИЯ БИБЛИОТЕК> # Токен для скачивания библиотек @var3n1k/
     ```

8. Собрать текущую версию приложения

   - Открыть терминал в корневой папке проекта и установить требуемые зависимости (**`npm i` / `npm install` / `npm update` НЕ ЗАПУСКАТЬ**)

     ```bash
       $ npm ci
     ```

   - Начать сборку приложения (`запускать после каждого сохраненного изменения в папке ./src`)

     ```bash
       $ npm run build
     ```

   - Запустить собранную Production-версию приложения
     ```bash
       $ npm run prod
     ```

## Разработка

- [Подключение библиотек](#подключение-библиотек)

### Подключение библиотек

- Используемые библиотеки

  - [@var3n1k/server-core](https://github.com/var3n1k/ServerCore/pkgs/npm/server-core)

- Подключение библиотек осуществляется через стандартные пакетные менеджеры `NodeJS`

  ```bash
    $ npm install @var3n1k/server-core
  ```

  ```bash
    $ yarn add @var3n1k/server-core
  ```

  ```bash
    $ pnpm add @var3n1k/server-core
  ```

## Использование
